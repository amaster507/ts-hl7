!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.exampleTypescriptPackage=r():e.exampleTypescriptPackage=r()}(this,(()=>(()=>{"use strict";var e={570:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getSegment=void 0,r.getSegment=function(e,r){if(void 0===r)return e[1];if(null===r.match(/^[A-Z0-9]{3}$/))throw new Error("Expected segment name to be 3 characters long, got ".concat(r));return e[1].filter((function(e){return e[0]===r}))}},764:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.decodeHL7=void 0;var n=t(241),o=t(303);r.decodeHL7=function(e,r){if(void 0===r&&(r=void 0),0!==e.length){var t={encodingCharacters:void 0!==r?r:e.startsWith("MSH")?(0,o.getEncodingChars)(e):{componentSep:"^",escapeChar:"\\",fieldSep:"|",repetitionSep:"~",subComponentSep:"&",subCompRepSep:void 0}},i=e.split(/\r?\n/).filter((function(e){return e.length})).map((function(e){return(0,n.decodeSegment)(e,t)}));return[t,i]}}},170:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.decodeRepSep=void 0,r.decodeRepSep=function(e,r,t,n){var o=!1;if(void 0===r&&(r="",o=!0),0===e.length)return[e,null];e=t+e;for(var i=[];e.startsWith(t);){e=r+e.slice(1);for(var c=[];o||e.startsWith(r);){o||(e=e.slice(1));var a=n(e,[t,r]),s=a[0],d=a[1];if(e=s,c.push(d),o)break}0===c.length?i.push(void 0):1===c.length?i.push(c[0]):(c.unshift({rep:!0}),i.push(c))}return 0===i.length?[e,void 0]:1===i.length&&"string"==typeof i[0]?[e,i[0]]:[e,i]}},241:function(e,r,t){var n=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))};Object.defineProperty(r,"__esModule",{value:!0}),r.decodeSegment=void 0;var o=t(170),i=t(567),c=t(303);r.decodeSegment=function(e,r){var t,a=null===(t=e.match(new RegExp("^([A-Z][A-Z0-9]{2})")))||void 0===t?void 0:t[1];if(!a)throw Error("Expected segment name, got ".concat(e.slice(0,20)));e=e.slice(3);var s=!1;"MSH"===a&&(s=!0,r.encodingCharacters=(0,c.getEncodingChars)(e.slice(0,8)),e=e.slice(Object.keys(r.encodingCharacters).length)),e.startsWith(r.encodingCharacters.fieldSep)&&(e=e.slice(1));var d=(0,o.decodeRepSep)(e,r.encodingCharacters.repetitionSep,r.encodingCharacters.fieldSep,(function(e,t){var n=(0,i.findCharsFirstPos)(e,t),c=(0,o.decodeRepSep)(e.slice(0,n),void 0,r.encodingCharacters.componentSep,(function(e,n){n.push.apply(n,t);var c=(0,i.findCharsFirstPos)(e,n),a=(0,o.decodeRepSep)(e.slice(0,c),void 0,r.encodingCharacters.subComponentSep,(function(e,r){r.push.apply(r,n);var t=(0,i.findCharsFirstPos)(e,r);return[e.slice(t),e.slice(0,t)]})),s=a[1];return[e=e.slice(c),s]})),a=c[1];return[e=e.slice(n),a]})),u=d[0],p=d[1];if(s){var l=r.encodingCharacters,f=l.fieldSep,v=l.componentSep,h=l.repetitionSep,g=l.escapeChar,y=l.subComponentSep,m=l.subCompRepSep;if(!Array.isArray(p))throw Error("Expected array of fields");null==p||p.unshift(f,"".concat(v).concat(h).concat(g).concat(y).concat(m||""))}return u&&console.log("Not Fully Decoded: ",u),null==p?[a]:Array.isArray(p)?n([a],p,!0):[a,p]}},567:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.findCharsFirstPos=void 0,r.findCharsFirstPos=function(e,r){return Math.min.apply(Math,r.filter((function(e){if(e.length>1)throw new Error("stop character is too long, expected 1 character");return e.length>0})).map((function(r){return e.indexOf(r)})).filter((function(e){return-1!==e})))}},303:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getEncodingChars=void 0,r.getEncodingChars=function(e){return{fieldSep:e.slice(0,1),componentSep:e.slice(1,2),repetitionSep:e.slice(2,3),escapeChar:e.slice(3,4),subComponentSep:e.slice(4,5),subCompRepSep:e.slice(0,1)===e.slice(5,6)?void 0:e.slice(5,6)}}},950:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0});var n=t(764);r.default=n.decodeHL7},669:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.encodeHL7=void 0;var n=t(67),o=t(415);r.encodeHL7=function(e){var r=e[0].encodingCharacters,t=r.fieldSep,i=r.repetitionSep,c=r.componentSep,a=r.subComponentSep,s=e[1];return(0,o.encodeSep)(s,"\n",(function(e){if(Array.isArray(e)&&"MSH"===e[0]){var r=e[0],s=(null==e?void 0:e[1])||"|",d=e[2]||"^~\\&";e.splice(0,3,"".concat(r).concat(s).concat(d))}return(0,o.encodeSep)(e,t,(function(e){return(0,n.encodeRep)(e,i,(function(e){return(0,o.encodeSep)(e,c,(function(e){return(0,o.encodeSep)(e,a,(function(e){return e}))}))}))}))}))}},67:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.encodeRep=void 0,r.encodeRep=function(e,r,t){var n;return void 0===t&&(t=function(e){return e}),Array.isArray(e)&&null!=e&&"object"==typeof(null==e?void 0:e[0])&&(null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.hasOwnProperty("rep"))?(e.shift(),e.map(t).join(r)):t(e)}},415:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.encodeSep=void 0,r.encodeSep=function(e,r,t){return void 0===t&&(t=function(e){return e}),Array.isArray(e)?e.map(t).join(r):e}},126:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0});var n=t(669);r.default=n.encodeHL7},432:function(e,r,t){var n=this&&this.__spreadArray||function(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Msg=void 0;var i=t(570),c=o(t(950)),a=o(t(126)),s=function(e){var r,t=this;this._msg=[{encodingCharacters:{fieldSep:"|",componentSep:"^",subComponentSep:"&",repetitionSep:"~",escapeChar:"\\"}},[["MSH","|","^~\\&"]]],this.addSegment=function(e){var r;if("string"==typeof e){var n=(0,c.default)(e);return void 0!==n&&((r=t.msg[1]).push.apply(r,n[1]),t.msg)}return e.length>0&&(t.msg[1].push(e),t.msg)},this.toString=function(){return(0,a.default)(t.msg)},this.get=function(e){if(void 0===e)return t.msg;var r="(?:\\[([0-9]+)\\])",n="(?:[-\\.]([0-9]+))",o=new RegExp("^(?:".concat("([A-Z][A-Z0-9]{2})",")").concat(r,"?(?:").concat(n).concat(r,"?(?:").concat(n).concat(n,"?)?)?$")),i=e.match(o),c=null!=i?i:[],a=c[1],s=c[2],d=c[3],u=c[4],p=c[5],l=c[6];return t._get(a,void 0===s?void 0:parseInt(s),void 0===d?void 0:parseInt(d),void 0===u?void 0:parseInt(u),void 0===p?void 0:parseInt(p),void 0===l?void 0:parseInt(l))},this._get=function(e,r,o,c,a,s){var d=(0,i.getSegment)(t.msg,e).filter((function(e,t){return void 0===r||t===r-1})).map((function(e){return void 0===o?e:null==e?void 0:e[o]})).map((function(e){var r;if(Array.isArray(e)&&e.length>1&&"object"==typeof e[0]&&(null===(r=e[0])||void 0===r?void 0:r.hasOwnProperty("rep"))){var t=[];return void 0===c?(t=n([],e,!0)).shift():Array.isArray(e)&&c>0&&(t=e.filter((function(e,r){return void 0===c||r===c}))),void 0!==a&&a>0&&(t=t.map((function(e){return null==e?void 0:e[a-1]})).map((function(e){return!Array.isArray(e)||void 0===s||s<1?e:null==e?void 0:e[s-1]}))),Array.isArray(t)&&1===t.length?t[0]:t}if(Array.isArray(e)){if(void 0===a||a<1)return e;var o=null==e?void 0:e[a-1];return!Array.isArray(o)||void 0===s||s<1?o:null==o?void 0:o[s-1]}return e}));return 1===d.length?d[0]:d},this.msg="string"==typeof e?null!==(r=(0,c.default)(e))&&void 0!==r?r:this._msg:void 0!==e?e:this._msg};r.Msg=s,r.default=s}},r={};return function t(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}(432)})()));